<%# TODO probably not secure %>
<div id="is-forum" data-is-forum="true" hidden></div> 

<h2 id="forum-name" data-forum-id="<%= @style.styleId %>"><%= @style.name %></h2>
<div class="row" style="margin-left: 5px;">
  <p class="text-muted"><%= @style.desc %></p>
</div>
<h4 class="d-inline mr-5"><%= Beer.gen_abv_text(@style) %></h4>
<h4><%= Beer.gen_ibu_text(@style) %></h4>

<%# Form for posting a message %>
<div class="form-group mt-5">
  <textarea class="form-control"
            id="new-message-content"
            placeholder="What do you think of this style?"></textarea>
</div>
<div><%= link "Post To Forum", to: "#",
                               class: "btn btn-primary submit-button mb-5",
                               id: "submit-button",
                               data_forum_id: @style.id %></div>

<%# Messages %>
<div class="row">

<div class="col-8">
  <div class="col-bordered">
    <table class="table">
      <tbody id="table-body">
      <%= for message <- @messages do %>
        <tr id="message-<%= message.id %>">
          <td id="content-<%= message.id %>"><%= message.content %></td>
          <td class="text-right">
            <span><%= link "Edit",
                      to: "#",
                      class: "btn btn-outline-warning btn-xs edit-button",
                      id: "edit-#{message.id}" %></span>
            <span><%= link "Delete",
                      to: "#",
                      class: "btn btn-danger btn-xs delete-button",
                      id: "delete-#{message.id}" %></span>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div> <%# col-8 %>

<div class="col-4" style="text-align: center; height: 600px; overflow-y: scroll;">
  <%# render a random selection of beers within the style %>
  <table class="table" style="background-color:powderblue; border: 5px solid grey;">
    <tbody id="table-body-beer">
    <tr>
      <th>Beers in this style...</th>
    </tr>
      <%= for beer <- WhatsHoppin.Beer.get_beers_in_style_parallel(@style) do %>
      <tr>
        <td>
          <a href="#" title="Description" data-toggle="hover" data-trigger="hover" 
          data-content="<%= WhatsHoppin.Beer.format_beer_description(beer) %>">
          <%= Map.get(beer, "name") %></a>
        </td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div> <%# col-4 %>

</div> <%# row %>
